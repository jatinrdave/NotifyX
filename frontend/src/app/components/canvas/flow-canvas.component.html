<div class="flow-canvas-container">
  <!-- Canvas Controls -->
  <div class="canvas-controls">
    <button (click)="centerView()" class="control-button" title="Center View">
      <span class="icon">⌂</span>
    </button>
    <button (click)="fitToView()" class="control-button" title="Fit to View">
      <span class="icon">⊞</span>
    </button>
    <span class="zoom-level">{{ (zoom * 100) | number:'1.0-0' }}%</span>
  </div>

  <!-- Canvas -->
  <div 
    #canvas
    class="canvas"
    (drop)="onDropNode($event)"
    (dragover)="onDragOver($event)"
    (click)="onCanvasClick()"
    (mousedown)="onPanStart($event)"
    (mousemove)="onPan($event)"
    (wheel)="onZoom($event)"
    [style.transform]="getCanvasTransform()">
    
    <!-- Edges -->
    <svg class="edges-layer">
      <path 
        *ngFor="let edge of edges"
        [attr.d]="getEdgePath(edge)"
        class="edge"
        stroke="#666"
        stroke-width="2"
        fill="none">
      </path>
    </svg>

    <!-- Nodes -->
    <div 
      *ngFor="let node of nodes"
      class="node"
      [class.selected]="selectedNode?.id === node.id"
      [style.transform]="getNodeTransform(node)"
      (click)="onNodeClick(node, $event)"
      (dblclick)="onNodeDoubleClick(node, $event)"
      (mousedown)="onNodeDragStart(node, $event)"
      (mousemove)="onNodeDrag(node, $event)"
      (mouseup)="onNodeDragEnd()">
      
      <div class="node-header" [style.background-color]="getNodeColor(node)">
        <span class="node-icon">{{ getNodeIcon(node) }}</span>
        <span class="node-title">{{ node.label || node.type }}</span>
        <button 
          class="node-close"
          (click)="removeNode(node.id); $event.stopPropagation()"
          title="Remove Node">
          <span class="icon">×</span>
        </button>
      </div>
      
      <div class="node-description">{{ getNodeDescription(node) }}</div>
    </div>
  </div>
</div>