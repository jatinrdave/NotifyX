<div class="run-inspector">
  <!-- Header -->
  <div class="inspector-header">
    <div class="connection-status">
      <span class="status-icon">{{ isConnected ? 'üü¢' : 'üî¥' }}</span>
      <span class="status-text">{{ isConnected ? 'Connected' : 'Disconnected' }}</span>
    </div>
    
    <div class="action-buttons">
      <button 
        *ngIf="isRunRunning()" 
        (click)="onCancel()" 
        class="action-button cancel-button">
        <span class="icon">‚èπ</span>
        Cancel
      </button>
      <button 
        *ngIf="canReplay()" 
        (click)="onReplay()" 
        class="action-button replay-button">
        <span class="icon">üîÑ</span>
        Replay
      </button>
    </div>
  </div>

  <!-- Progress Bar -->
  <div class="progress-section">
    <div class="progress-bar">
      <div 
        class="progress-fill"
        [style.width.%]="getProgressPercentage()"
        [class.completed]="isRunComplete()">
      </div>
    </div>
    <span class="progress-text">{{ getProgressPercentage() }}% Complete</span>
  </div>

  <!-- Run Status -->
  <div *ngIf="run" class="run-status">
    <div class="status-info">
      <span class="status-icon" [style.color]="getStatusColor(run.status)">{{ getStatusIcon(run.status) }}</span>
      <span class="status-text">{{ run.status | titlecase }}</span>
      <span *ngIf="run.durationMs" class="duration">
        {{ formatDuration(run.durationMs) }}
      </span>
    </div>
    
    <div class="run-details">
      <div class="detail-item">
        <span class="label">Started:</span>
        <span class="value">{{ formatTimestamp(run.startTime) }}</span>
      </div>
      <div class="detail-item" *ngIf="run.endTime">
        <span class="label">Ended:</span>
        <span class="value">{{ formatTimestamp(run.endTime) }}</span>
      </div>
      <div class="detail-item" *ngIf="run.errorMessage">
        <span class="label">Error:</span>
        <span class="value error">{{ run.errorMessage }}</span>
      </div>
    </div>
  </div>

  <!-- Node Execution Results -->
  <div class="node-results">
    <h3>Node Execution Results</h3>
    
    <div *ngIf="nodeResults.length === 0" class="no-results">
      <span class="icon">‚è≥</span>
      <p>No node executions yet</p>
    </div>
    
    <div *ngFor="let result of nodeResults; trackBy: trackByNodeId" class="node-result">
      <div class="result-header">
        <div class="node-info">
          <span class="node-icon" [style.color]="getStatusColor(result.status)">
            {{ getStatusIcon(result.status) }}
          </span>
          <div class="node-details">
            <h4 class="node-name">{{ getNodeName(result.nodeId) }}</h4>
            <span class="node-type">{{ getNodeType(result.nodeId) }}</span>
          </div>
        </div>
        
        <div class="result-meta">
          <span class="duration">{{ formatDuration(result.durationMs) }}</span>
          <span class="timestamp">{{ formatTimestamp(result.startTime) }}</span>
        </div>
      </div>
      
      <div *ngIf="result.errorMessage" class="error-message">
        <span class="icon">‚ö†Ô∏è</span>
        <span class="error-text">{{ result.errorMessage }}</span>
      </div>
      
      <div *ngIf="result.output" class="output-section">
        <button 
          (click)="toggleOutput(result.nodeId)" 
          class="toggle-button">
          <span class="icon">{{ isOutputExpanded(result.nodeId) ? '‚ñº' : '‚ñ∂' }}</span>
          Output
        </button>
        
        <div *ngIf="isOutputExpanded(result.nodeId)" class="output-content">
          <pre>{{ result.output | json }}</pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!run && !isLoading" class="empty-state">
    <span class="icon">‚è∞</span>
    <p>No run data available</p>
    <p class="hint">Start a workflow execution to see results here</p>
  </div>
</div>